"use strict";(self.webpackChunkelemental_docs=self.webpackChunkelemental_docs||[]).push([[454],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=m(n),d=r,f=p["".concat(s,".").concat(d)]||p[d]||c[d]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var m=2;m<o;m++)i[m]=n[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4559:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>f,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(7462),r=(n(7294),n(3905)),o=n(4713);const i={sidebar_label:"Smbios",title:""},l=void 0,s={unversionedId:"smbios",id:"smbios",title:"",description:"Introduction",source:"@site/docs/smbios.md",sourceDirName:".",slug:"/smbios",permalink:"/elemental/smbios",draft:!1,tags:[],version:"current",frontMatter:{sidebar_label:"Smbios",title:""},sidebar:"elemental",previous:{title:"Kubernetes versions",permalink:"/elemental/kubernetesversions"},next:{title:"Inventory Management",permalink:"/elemental/inventory-management"}},m={},u=[{value:"Introduction",id:"introduction",level:2},{value:"How does Elemental uses SMBIOS data?",id:"how-does-elemental-uses-smbios-data",level:2}],c=(p="CodeBlock",function(e){return console.warn("Component "+p+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var p;const d={toc:u};function f(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The System Management BIOS (SMBIOS) specification defines data structures (and access methods) that can be used to read management information produced by the BIOS of a computer."),(0,r.kt)("p",null,"This allows us to gather hardware information about the running system and use that as part of our labels."),(0,r.kt)("h2",{id:"how-does-elemental-uses-smbios-data"},"How does Elemental uses SMBIOS data?"),(0,r.kt)("p",null,"The registration client tries to gather SMBIOS data by running ",(0,r.kt)("inlineCode",{parentName:"p"},"dmidecode")," during the initial registration of the node and that data is\nsent to the registration controller to use on interpolating different fields in the inventory that we create for that node."),(0,r.kt)("p",null,"Currently, we support interpolating that data into the ",(0,r.kt)("inlineCode",{parentName:"p"},"machineName")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"machineInventoryLabels")," of a ",(0,r.kt)("a",{parentName:"p",href:"/elemental/machineregistration-reference"},"machineRegistration")),(0,r.kt)("p",null,"The interpolation format is as follows:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"{$KEY/VALUE}")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"${KEY/SUBKEY/VALUE}")),(0,r.kt)("p",null,"This can be mixed with normal strings so ",(0,r.kt)("inlineCode",{parentName:"p"},"my-prefix-${KEY/VALUE}")," would result into the resolved values with ",(0,r.kt)("inlineCode",{parentName:"p"},"my-prefix-")," prefixed"),(0,r.kt)("p",null,"For example, having the following SMBIOS data:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console",metastring:"showLineNumbers",showLineNumbers:!0},"System Information\n    Manufacturer: My manufacturer\n    Product Name: Awesome PC\n    Version: Not Specified\n    Serial Number: THX1138\n    Family: Toretto\n")),(0,r.kt)("p",null,"And setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"machineName")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"serial-${System Information/Serial Number}")," would result in the final value of ",(0,r.kt)("inlineCode",{parentName:"p"},"serial-THX1138")),(0,r.kt)("p",null,"This is useful to generate automatic names for machines based on their hardware values, for example using the UUID or the Product name.\nOur default ",(0,r.kt)("inlineCode",{parentName:"p"},"machineName")," when the registration values are empty is ",(0,r.kt)("inlineCode",{parentName:"p"},'"m-${System Information/UUID}"'),"."),(0,r.kt)("admonition",{title:"warning",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"All non-valid characters will be changed into ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," automatically on parse. Valid characters for labels are alphanumeric and ",(0,r.kt)("inlineCode",{parentName:"p"},"-"),",",(0,r.kt)("inlineCode",{parentName:"p"},"_")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"."),"\nFor machineName the constraints are stricter as that value is used for the hostname so valid values are lowercase alphanumeric and ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," only.")),(0,r.kt)("p",null,"A good use of SMBIOS data is to set up different labels for all your machines and get those values from the hardware directly."),(0,r.kt)("p",null,"Having your ",(0,r.kt)("inlineCode",{parentName:"p"},"machineInventoryLabels")," on the ",(0,r.kt)("a",{parentName:"p",href:"/elemental/machineregistration-reference"},"machineRegistration")," set to SMBIOS data would allow\nyou to use selectors down the line to select similar machines."),(0,r.kt)("p",null,"For example using the following label ",(0,r.kt)("inlineCode",{parentName:"p"},'cpuFamily: "${Processor Information/Family}')," would allow you to use a selector to search for i7 cpus in your machine fleet."),(0,r.kt)(c,{language:"yaml",title:"registration example with smbios labels",showLineNumbers:!0,mdxType:"CodeBlock"},o.Z))}f.isMDXComponent=!0},4713:(e,t,n)=>{n.d(t,{Z:()=>a});const a='apiVersion: elemental.cattle.io/v1beta1\nkind: MachineRegistration\nmetadata:\n  name: my-nodes\n  namespace: fleet-default\nspec:\n  config:\n    cloud-config:\n      users:\n        - name: root\n          passwd: root\n    elemental:\n      install:\n        reboot: true\n        device: /dev/sda\n        debug: true\n  machineName: my-machine\n  machineInventoryLabels:\n    location: "europe"\n    manufacturer: "${System Information/Manufacturer}"\n    productName: "${System Information/Product Name}"\n    serialNumber: "${System Information/Serial Number}"\n    machineUUID: "${System Information/UUID}"'}}]);